!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.re=t||0,this.im=n||0}var t,n,i;return t=e,i=[{key:"revive",value:function(t){return new e(t.re,t.im)}}],(n=[{key:"toJSON",value:function(){return{_type:"Complex",re:this.re,im:this.im}}},{key:"plus",value:function(e){return this.re+=e.re,this.im+=e.im,this}},{key:"minus",value:function(e){return this.re-=e.re,this.im-=e.im,this}},{key:"times",value:function(e){var t=this.re*e.re-this.im*e.im;return this.im=this.re*e.im+this.im*e.re,this.re=t,this}},{key:"div",value:function(e){var t=e.re*e.re+e.im*e.im,n=(this.re*e.re+this.im*e.im)/t;return this.im=(this.im*e.re-this.re*e.im)/t,this.re=n,this}},{key:"conj",value:function(){return this.im=-this.im,this}},{key:"abs",value:function(){return this.re=Math.abs(this.re),this.im=Math.abs(this.im),this}},{key:"getSquare",value:function(){return this.re*this.re+this.im*this.im}},{key:"getModule",value:function(){return Math.sqrt(this.re*this.re+this.im*this.im)}},{key:"getCopy",value:function(){return new e(this.re,this.im)}},{key:"getSym",value:function(){return new e(-this.re,-this.im)}}])&&r(t.prototype,n),i&&r(t,i),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"calculate",value:function(e){var t=e.getCopy();return e.times(e).times(t).re-=1,e}},{key:"toJSON",value:function(){return{_type:"NewtonEquation"}}}])&&o(t.prototype,n),r&&o(t,r),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"calculate",value:function(e,t){return e.times(e).plus(t)}},{key:"toJSON",value:function(){return{_type:"MandelbrotEquation"}}}])&&u(t.prototype,n),r&&u(t,r),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"calculate",value:function(e,t){var n=e.getCopy();return e.times(e).times(n).plus(t)}},{key:"toJSON",value:function(){return{_type:"MandelCubicEquation"}}}])&&s(t.prototype,n),r&&s(t,r),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"calculate",value:function(e,t){return e.times(e).times(e).plus(t)}},{key:"toJSON",value:function(){return{_type:"MandelQuarticEquation"}}}])&&h(t.prototype,n),r&&h(t,r),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"calculate",value:function(e,t){return e.abs().times(e).minus(t)}},{key:"toJSON",value:function(){return{_type:"BurningShipEquation"}}}])&&f(t.prototype,n),r&&f(t,r),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"calculate",value:function(e,t){return e.conj().times(e).plus(t)}},{key:"toJSON",value:function(){return{_type:"TricornEquation"}}}])&&p(t.prototype,n),r&&p(t,r),e}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"revive",value:function(e){if("NewtonEquation"==e._type)return new a;if("MandelbrotEquation"==e._type)return new l;if("MandelCubicEquation"==e._type)return new c;if("MandelQuarticEquation"==e._type)return new m;if("TricornEquation"==e._type)return new y;if("BurningShipEquation"==e._type)return new v;throw"Equation revive not implemented !"}}],(n=null)&&g(t.prototype,n),r&&g(t,r),e}();function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.equation=t,this.radius=r,this.maxIter=n,this.c=i||null}var t,n,r;return t=e,r=[{key:"revive",value:function(t){return new e(w.revive(t.equation),t.maxIter,t.radius,t.c?i.revive(t.c):null)}}],(n=[{key:"toJSON",value:function(){return{_type:"BailoutAlgo",equation:this.equation.toJSON(),maxIter:this.maxIter,radius:this.radius,c:this.c?this.c.toJSON():null}}},{key:"iterate",value:function(e){var t=0,n=this.c||new i(e.re,e.im);for(this.c||(e.re=0,e.im=0);e.getSquare()<=this.radius&&t<this.maxIter;)this.equation.calculate(e,n),t++;return{iter:t,complex:e}}}])&&b(t.prototype,n),r&&b(t,r),e}();function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.equation=t,this.maxIter=n,this.epsilon=r}var t,n,r;return t=e,r=[{key:"revive",value:function(t){return new e(w.revive(t.equation),t.maxIter,t.epsilon)}}],(n=[{key:"toJSON",value:function(){return{_type:"NewtonAlgo",equation:this.equation.toJSON(),maxIter:this.maxIter,epsilon:this.epsilon}}},{key:"derivative",value:function(e,t,n){var r=e.getCopy();return n(e.plus(t)).minus(n(r)).div(t)}},{key:"iterate",value:function(e){var t,n=0,r=new i(1e-6,1e-6);do{t=e.getCopy().minus(e.minus(this.equation.calculate(e.getCopy()).div(this.derivative(e.getCopy(),r,this.equation.calculate)))),n++}while(t.getSquare()>this.epsilon&&n<this.maxIter);return{iter:n,complex:t}}}])&&k(t.prototype,n),r&&k(t,r),e}();function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"revive",value:function(e){if("BailoutAlgo"==e._type)return C.revive(e);if("NewtonAlgo"==e._type)return d.revive(e);throw"Algo revive not implemented !"}}],(n=null)&&O(t.prototype,n),r&&O(t,r),e}();class N{constructor(e=0,t=0,n=0,r=0){this.r=e,this.g=t,this.b=n,this.a=r}delta(e){return new N(this.r-e.r,this.g-e.g,this.b-e.b,this.a-e.a)}rgb(){return`rgb(${this.r},${this.g},${this.b})`}toJSON(){return{_type:"Color",r:this.r,g:this.g,b:this.b,a:this.a}}static revive(e){return new N(e.r,e.g,e.b,e.a)}static get(e){return t=>{switch(e){default:case"white":return new N(255,255,255,t);case"black":return new N(0,0,0,t);case"red":return new N(255,0,0,t);case"green":return new N(0,255,0,t);case"blue":return new N(0,0,255,t);case"yellow":return new N(255,255,0,t);case"cyan":return new N(0,255,255,t);case"magenta":return new N(255,0,255,t);case"indigo":return new N(128,0,255,t);case"pink":return new N(255,0,128,t);case"orange":return new N(255,128,0,t);case"apple":return new N(128,255,0,t);case"manganese":return new N(0,128,255,t);case"guppie":return new N(0,255,128,t);case"purple":return new N(128,0,128,t);case"teal":return new N(0,128,128,t);case"olive":return new N(128,128,0,t);case"coral":return new N(255,128,128,t)}}}}class J{constructor(e,t){if(t.length<=1)throw"Two colors minimum.";this.map=[],this.numSteps=e,this.colors=t,this.init()}init(){let e,t,n,r,i=1/(this.colors.length-1),o=this,a=t=>parseInt(o.colors[e][t]+n*r[t],10);for(let o=0;o<this.numSteps;o++){let u=o/(this.numSteps-1);e=Math.floor(u/i),t=Math.min(this.colors.length-1,e+1),n=(u-e*i)/i,r=this.colors[t].delta(this.colors[e]),this.map.push(new N(a("r"),a("g"),a("b"),a("a")))}}getColor(e){let t=Math.max(0,Math.min(1,e)),n=Math.floor(t*(this.map.length-1));return this.map[n]}toJSON(){return{_type:"ColorMap",numSteps:this.numSteps,colors:this.colors.map(function(e){return e.toJSON()})}}static revive(e){return new J(e.numSteps,e.colors.map(function(e){return N.revive(e)}))}static get(e){return t=>{switch(e){default:case"whitetoblack":return new J(t,[new N(255,255,255,255),new N(0,0,0,255)]);case"rgb":return new J(t,[new N(255,0,0,255),new N(0,255,0,255),new N(0,0,255,255)]);case"rainbow":return new J(t,[new N(255,0,0,255),new N(255,128,0,255),new N(255,255,0,255),new N(0,255,0,255),new N(128,0,128,255),new N(128,0,255,255),new N(255,0,0,255)]);case"night":return new J(t,[new N(0,0,102,255),new N(255,255,255,255),new N(255,102,0,255),new N(0,0,102,255)]);case"blacknwhite":return new J(t,[new N(255,255,255,255),new N(0,0,0,255),new N(255,255,255,255),new N(0,0,0,255)]);case"fire":return new J(t,[new N(0,0,0,255),new N(255,0,0,255),new N(255,255,0,255),new N(255,0,0,255)]);case"sky":return new J(t,[new N(0,0,120,255),new N(200,255,255,255),new N(0,0,120,255)])}}}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.algorithm=t,this.mainColor=n,this.bailoutColor=r}var t,n,r;return t=e,r=[{key:"revive",value:function(t){return new e(S.revive(t.algorithm),N.revive(t.mainColor),N.revive(t.bailoutColor))}}],(n=[{key:"getColor",value:function(e){return this.algorithm.iterate(e).iter==this.algorithm.maxIter?this.mainColor:this.bailoutColor}},{key:"toJSON",value:function(){return{_type:"SimpleColoring",algorithm:this.algorithm.toJSON(),mainColor:this.mainColor.toJSON(),bailoutColor:this.bailoutColor.toJSON()}}}])&&_(t.prototype,n),r&&_(t,r),e}();function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.algorithm=t,this.mainColor=n,this.palette=r}var t,n,r;return t=e,r=[{key:"revive",value:function(t){return new e(S.revive(t.algorithm),N.revive(t.mainColor),J.revive(t.palette))}}],(n=[{key:"getColor",value:function(e){var t=this.algorithm.iterate(e);return t.iter==this.algorithm.maxIter?this.mainColor:this.palette.getColor(t.iter/this.algorithm.maxIter)}},{key:"toJSON",value:function(){return{_type:"BailoutColoring",algorithm:this.algorithm.toJSON(),mainColor:this.mainColor.toJSON(),palette:this.palette.toJSON()}}}])&&M(t.prototype,n),r&&M(t,r),e}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.algorithm=t,this.mainColor=n,this.palette=r}var t,n,r;return t=e,r=[{key:"revive",value:function(t){return new e(S.revive(t.algorithm),N.revive(t.mainColor),J.revive(t.palette))}}],(n=[{key:"getColor",value:function(e){var t=this.algorithm.iterate(e);return t.iter==this.algorithm.maxIter?this.mainColor:this.palette.getColor((t.iter+1-Math.log(Math.log(t.complex.getModule())/Math.log(2))/Math.log(2))/this.algorithm.maxIter)}},{key:"toJSON",value:function(){return{_type:"SmoothBailoutColoring",algorithm:this.algorithm.toJSON(),mainColor:this.mainColor.toJSON(),palette:this.palette.toJSON()}}}])&&q(t.prototype,n),r&&q(t,r),e}();function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.algorithm=t,this.mainColor=n,this.positiveColor=r,this.negativeColor=i}var t,n,r;return t=e,r=[{key:"revive",value:function(t){return new e(S.revive(t.algorithm),N.revive(t.mainColor),N.revive(t.positiveColor),N.revive(t.negativeColor))}}],(n=[{key:"getColor",value:function(e){var t=this.algorithm.iterate(e);return t.iter==this.algorithm.maxIter?this.mainColor:t.complex.im>0?this.positiveColor:this.negativeColor}},{key:"toJSON",value:function(){return{_type:"BinaryColoring",algorithm:this.algorithm.toJSON(),mainColor:this.mainColor.toJSON(),positiveColor:this.positiveColor.toJSON(),negativeColor:this.negativeColor.toJSON()}}}])&&P(t.prototype,n),r&&P(t,r),e}();function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.algorithm=t,this.mainColor=n,this.palette=r}var t,n,r;return t=e,r=[{key:"revive",value:function(t){return new e(S.revive(t.algorithm),N.revive(t.mainColor),J.revive(t.palette))}}],(n=[{key:"getColor",value:function(e){var t=this.algorithm.iterate(e);return t.iter==this.algorithm.maxIter?this.mainColor:this.palette.getColor((Math.atan2(t.complex.im,t.complex.re)+Math.PI)/(2*Math.PI))}},{key:"toJSON",value:function(){return{_type:"AngleColoring",algorithm:this.algorithm.toJSON(),mainColor:this.mainColor.toJSON(),palette:this.palette.toJSON()}}}])&&I(t.prototype,n),r&&I(t,r),e}();function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"revive",value:function(e){if("SimpleColoring"==e._type)return E.revive(e);if("BailoutColoring"==e._type)return x.revive(e);if("SmoothBailoutColoring"==e._type)return j.revive(e);if("BinaryColoring"==e._type)return T.revive(e);if("AngleColoring"==e._type)return B.revive(e);throw"Coloring revive not implemented !"}}],(n=null)&&A(t.prototype,n),r&&A(t,r),e}();function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t?this.m=t.slice(0):this.reset()}var t,n,r;return t=e,(n=[{key:"getCopy",value:function(){return new e(this.m)}},{key:"reset",value:function(){return this.m=[1,0,0,1,0,0],this}},{key:"multiply",value:function(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],i=this.m[1]*e.m[2]+this.m[3]*e.m[3],o=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],a=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=o,this.m[5]=a,this}},{key:"invert",value:function(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,r=-this.m[2]*e,i=this.m[0]*e,o=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=o,this.m[5]=a,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.m[0]*t+this.m[2]*n,i=this.m[1]*t+this.m[3]*n,o=this.m[0]*-n+this.m[2]*t,a=this.m[1]*-n+this.m[3]*t;return this.m[0]=r,this.m[1]=i,this.m[2]=o,this.m[3]=a,this}},{key:"translate",value:function(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}},{key:"scale",value:function(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}},{key:"transformPoint",value:function(e,t){var n=e,r=t;return[e=n*this.m[0]+r*this.m[2]+this.m[4],t=n*this.m[1]+r*this.m[3]+this.m[5]]}}])&&Q(t.prototype,n),r&&Q(t,r),e}(),D=null;self.onmessage=function(e){var t={row:e.data.row,colors:[]},n=new z(e.data.m);D||(D=$.revive(e.data.coloring));for(var r=0;r<e.data.width;r++){var o=n.transformPoint(r,e.data.row);t.colors[r]=D.getColor(new i(o[0],o[1]))}postMessage(t)}}]);